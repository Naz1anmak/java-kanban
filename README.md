# Kanban Task Tracker

Kanban Task Tracker — проект для управления задачами на основе методологии Kanban. Позволяет создавать, обновлять и
удалять задачи, организовывать подзадачи и эпики, а также сохранять историю действий и поддерживать автосохранение
состояния задач в файл. Теперь проект поддерживает полноценное взаимодействие по HTTP с помощью REST API.

## Основные возможности

### 1. Управление задачами (Tasks)

- Добавление, обновление и удаление задач через REST API.
- Поиск задач по идентификатору.
- Просмотр всех задач.
- Массовое удаление всех задач.
- Обработка ошибок и выдача сообщений в случае некорректных запросов.

### 2. Управление подзадачами (Subtasks)
- Добавление подзадачи к эпику.
- Обновление и удаление подзадач.
- Поиск подзадач по идентификатору.
- Получение списка всех подзадач для конкретного эпика.
- Массовое удаление всех подзадач.
- Обработка ошибок (например, неверный ID эпика).

### 3. Управление эпиками (Epics)
- Добавление новых эпиков.
- Просмотр всех эпиков и их связанных подзадач.
- Обновление и удаление эпиков (удаляются все связанные подзадачи).
- Поиск эпиков по идентификатору.
- Поддержка автоматического пересчета статуса эпика на основе статусов подзадач.

### 4. История задач (History)
- Автоматическое добавление задач в историю просмотров.
- Хранение истории последних 10 просмотренных задач.
- Получение списка задач из истории через отдельный эндпоинт.

### 5. Приоритет задач

- Эндпоинт для получения списка задач по приоритету.
- Автоматическое обновление порядка задач при добавлении новых задач или подзадач.

### 6. Обработка исключений и ошибок

- Реализовано централизованное обработка исключений, таких как `NotFoundException`.
- Использование HTTP-кодов из отдельного перечисления `HttpStatusCode` для более читаемого кода и лучшего управления
  статусами ответа.

### 7. Автосохранение и восстановление из файла
- Автоматическое сохранение всех задач, эпиков и подзадач в файл `autoSave.csv`.
- Восстановление состояния менеджера задач из файла при запуске программы.
- Поддержка сериализации задач в строковый формат и их десериализация.

---

## Структура проекта

- **server**:
  - Основной сервер: `HttpTaskServer`.
  - Обработчики запросов: `TaskHandler`, `SubtaskHandler`, `EpicHandler`, `HistoryHandler`, `PrioritizedHandler`.
  - Базовый класс для обработчиков: `BaseHttpHandler`.
  - Класс для HTTP-статусов: `HttpStatusCode`.

- **task**:
  - Классы для представления задач: `Task`, `Subtask`, `Epic`.
  - Перечисление статусов задачи: `TaskStatus`.

- **manager**:
  - Интерфейс управления задачами: `TaskManager`.
  - Реализация менеджеров задач: `InMemoryTaskManager`, `FileBackedTaskManager`.
  - Утилитарный класс для получения менеджеров: `Managers`.

- **history**:
  - Интерфейс для работы с историей: `HistoryManager`.
  - Реализация менеджера истории: `InMemoryHistoryManager`.
  - Узлы двусвязного списка для хранения истории: `Node`.

- **exception**:
  - Исключения для обработки ошибок: `ManagerSaveException`, `NotFoundException`, `TaskIntersectionException`.

- **test**:
  - Тесты для проверки всех аспектов работы API и менеджеров задач:
    - `TaskHandlerTest`
    - `EpicHandlerTest`
    - `SubtaskHandlerTest`
    - `HistoryHandlerTest`

---

## Запуск проекта

1. Убедитесь, что JDK версии 11 или выше установлена.
2. Запустите `Main.java` для работы с приложением.
3. Все изменения задач будут автоматически сохраняться в файл `autoSave.csv`.

## API-Эндпоинты

- **Tasks**:
  - `GET /tasks` — получить все задачи.
  - `GET /tasks/{id}` — получить задачу по ID.
  - `POST /tasks` — создать или обновить задачу.
  - `DELETE /tasks/{id}` — удалить задачу по ID.

- **Epics**:
  - `GET /epics` — получить все эпики.
  - `GET /epics/{id}` — получить эпик по ID.
  - `GET /epics/{id}/subtasks` — получить все подзадачи для эпика.
  - `POST /epics` — создать или обновить эпик.
  - `DELETE /epics/{id}` — удалить эпик по ID.

- **Subtasks**:
  - `GET /subtasks` — получить все подзадачи.
  - `GET /subtasks/{id}` — получить подзадачу по ID.
  - `POST /subtasks` — создать или обновить подзадачу.
  - `DELETE /subtasks/{id}` — удалить подзадачу по ID.

- **История**:
  - `GET /history` — получить историю последних 10 просмотренных задач.

- **Приоритетные задачи**:
  - `GET /prioritized` — получить список задач по приоритету.
